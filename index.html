<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Pedido Irrecus√°vel</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://sdk.scdn.co/spotify-player.js"></script>
</head>
<body>
    <div class="box">
        <h1 class="title">Aceita sair comigo?</h1>
        <div class="button-container">
            <button id="yes">Sim</button>
            <button id="no">N√£o</button>
        </div>
    </div>
        <!-- Bot√£o para baixar o PDF -->
        <button id="download-pdf">Pdf</button>

        <!-- Link oculto para o arquivo PDF -->
        <a id="pdf-link" href="arquivo.pdf" download style="display: none;"></a>

    <!-- Elemento de √°udio para tocar m√∫sica de fundo -->
    <audio id="background-music" loop></audio>

    <script>
        let player;
        let deviceId;
        const token = 'BQC-hPGrLRqqUSrmyl6W4XNqMezErwwwDRIvMoueH-exotO7zrtWe-f8tgN6FN5lUVBLUSWl_TGYVb_mtqr-d6K0gjDVq06dlksdTom92ZxlOAOWRXmbQHRKig-QfXJBQt-d9jSZiSzDlsyKx1gfgGsFyiPLH9RHd91TEvvipwJ2hFw1XxteRWc49MsZsHvTGkSZ90rj1xHl3vN3Q6aypUG_YAMlh5VZNg'; // Substitua pelo seu token de acesso do Spotify

        window.onSpotifyWebPlaybackSDKReady = () => {
            player = new Spotify.Player({
                name: 'Web Playback SDK Quick Start Player',
                getOAuthToken: cb => { cb(token); },
                volume: 0.03 // Ajuste o volume aqui (0.0 a 1.0)
            });

            // Conecta o player
            player.connect();

            // Obter o ID do dispositivo
            player.addListener('ready', ({ device_id }) => {
                deviceId = device_id;
                console.log('Device ID', device_id);
            });
        };

        function playMusic() {
            fetch(`https://api.spotify.com/v1/me/player/play?device_id=${deviceId}`, {
                method: 'PUT',
                body: JSON.stringify({
                    context_uri: 'spotify:playlist:37i9dQZF1DXcBWIGoYBM5M' // Substitua pelo URI da playlist que deseja tocar
                }),
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
            }).then(response => {
                if (response.ok) {
                    console.log('Playback started');
                } else {
                    console.error('Error starting playback', response);
                }
            });
        }

        document.getElementById('yes').addEventListener('click', function() {
            Swal.fire({
                title: 'Agora voc√™ tem um encontro comigo hihi',
                text: 'Mas antes, testa clicar no n√£o fiz com bastante carinho',
                imageUrl: 'https://i.pinimg.com/originals/02/8f/ac/028fac670a4101695f0d9ccecd42fed6.jpg',
                imageWidth: 100,
                imageHeight: 100,
                imageAlt: 'Imagem personalizada',
                confirmButtonText: 'üíò',
                customClass: {
                    confirmButton: 'swal2-confirm'
                }
            });
        });

        document.getElementById('no').addEventListener('click', function() {
            const messages = [
                'Tem certeza?',
                'Que tal uma musica pra te convencer?',
                'Qual foi ja deu uma olhada nos motivos pra me namorar?',
                'Voc√™ √© insistente mesmo hein',
                'Eu acho que nesse ponto voc√™ s√≥ ta vendo at√© onde as mensagens v√£o',
                'Se eu insistir mais um pouco, voc√™ topa sair comigo?',
                "Eu acho que voc√™ ja vai vai sair comigo, mas eu vou continuar com as mensagens",
                'Desafio aceito: convencer voc√™ a clicar no n√£o',
                'Eu acho que voc√™ n√£o vai clicar no n√£o',
                'Ser√° que consigo convencer voc√™ dessa vez?',
                'de 0 a 10 qual a chance de voc√™ clicar no n√£o?',
                'Eu sabia que era zero',
                'Minha criatividade tem limite sabia?',
                'Se voc√™ clicar no n√£o, depois eu deixo voc√™ clicar no sim',
                'Meu deus voc√™ √© muito determinada', 
                'Vou apelar to avisando', 
                'Se voc√™ clicar no n√£o, vai ter que me dar o c√∫',
                'N√£o √© possivel, eu desisto',
            ];
            let messageIndex = 0;

            function showConfirmation() {
                Swal.fire({
                    title: messages[messageIndex],
                    showDenyButton: true,
                    showCancelButton: messageIndex >= 1, // Mostra o bot√£o de play a partir do segundo alerta
                    confirmButtonText: 'Sim',
                    denyButtonText: 'N√£o',
                    cancelButtonText: 'Play M√∫sica',
                    customClass: {
                        confirmButton: 'swal2-confirm',
                        denyButton: 'swal2-deny',
                        cancelButton: 'swal2-cancel'
                    }
                }).then((result) => {
                    if (result.isConfirmed) {
                        messageIndex = (messageIndex + 1) % messages.length; // Avan√ßa para a pr√≥xima mensagem
                        showConfirmation(); // Chama novamente para criar o ciclo infinito
                    } else if (result.isDenied) {
                        // Apenas fecha o alerta sem exibir outra mensagem
                    } else if (result.dismiss === Swal.DismissReason.cancel) {
                        // D√° play na m√∫sica sem fechar o alerta
                        playMusic();
                        showConfirmation(); // Chama novamente para manter o alerta aberto
                    }
                });
            }

            showConfirmation();
        });

        function downloadPDF() {
            document.getElementById('pdf-link').click();
        }

        // Adiciona o evento de clique ao bot√£o de download de PDF
        document.getElementById('download-pdf').addEventListener('click', downloadPDF);
    </script>
</body>
</html>